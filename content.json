{"meta":{"title":"M","subtitle":null,"description":"眼里长着阳光，笑里全是坦荡。","author":"Monica Jia","url":"https://870727741.github.io","root":"/"},"pages":[],"posts":[{"title":"自建Blog","slug":"自建Blog","date":"2019-09-25T01:36:36.000Z","updated":"2019-09-25T08:40:02.016Z","comments":true,"path":"2019/09/25/自建Blog/","link":"","permalink":"https://870727741.github.io/2019/09/25/自建Blog/","excerpt":"[TOC] hexo 博客框架 自建静态博客 CodeSheep参考视频 官方文档","text":"[TOC] hexo 博客框架 自建静态博客 CodeSheep参考视频 官方文档 环境准备 安装 GIT 安装 node.js:node,js download 检查是否安装成功 由于国内互联网环境，导致npm下载失败，可使用npm淘宝镜像cnpm* 1npm install -g cnpm --registry=https://registry.npm.taobao.org 安装 1hexo cnpm install -g hexo-cli 搭建启动部署博客 新建一个放置博客文件的专属文件夹，在命令行下将路径切换到文件夹所在路径 博客初始化 命令行输入 hexo init 【mac os 输入 sudo hexo init】 启动 hexo s 新建一篇文章 hexo n “我的第一篇博客文章.md” github 新建一个仓库 用户名.github.io jmp.github.io 安装cnpm插件 1cnpm install --save hexo-deployer-git 修改_config.yml文件，在文件底部这样修改![1565168436408](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1565168436408.png) 123type: gitrepo: https://github.com/870727741/870727741.github.io.gitbranch: master 部署到远端 hexo d 博文用Markdown写，后缀名为.md，放在post文件夹里。每次写完，hexo g -d生成部署 更换blog主题 路径切换到blog文件夹下面 1&gt;git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia 修改配置文件 blog/_config.ymlstart _config.yml 1234theme: yilia&gt;hexo c &gt;hexo g &gt;hexo s 总结注意事项 git,github,repositories所有用户名/账户名一致一一致！ 每行命令失败先检查当前行是否敲错，根据错误提示检查敲过的命令是否生效 博客迁移到另一台电脑配置了 git，node.js 后，只需要复制下面几个文件： 12345_config.ymlpackage.jsonscaffolds/source/themes/ 然后安装 hexo： 1npm install -g hexo 安装完之后，进入（或者新建子目录）博客目录，再执行下面命令： 1234npm installnpm install hexo-deployer-git --savenpm install hexo-generator-feed --savenpm install hexo-generator-sitemap --save 最后，执行下面命令查看结果： 12hexo ghexo s 图片路径生成错误原因参考文章：hexo引用本地图片无法显示 参考问题 应该是hexo-asset-image这个插件的bug,hexo版本3.0以上获取网站url的方式与3.0以下有些不同，照着文章修改hexo.js的index.js就行，或者直接卸载hexo-asset-image，选择使用hexo 3.0方式的标签插件应该也可以 githu评论功能 github授权认证 ![1569399678950](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1569399678950.png) ![1569399726184](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1569399726184.png) ![1569399753749](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1569399753749.png) ![1569399803469](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1569399803469.png) 填写完毕后点击Register application 跳转到另外一个界面，这里可以得到一个Client ID和Client Secret ![1569399880060](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1569399880060.png) 修改_config.yml themes\\yilia_config.yml ![1569400094600](C:\\Users\\Monica J\\AppData\\Roaming\\Typora\\typora-user-images\\1569400094600.png) 解决评论功能遇到的 [object ProgressEvent] 博客根目录下安装 1npm i --save gitment 修改 node_modules\\gitment\\dist\\gitment.js 参考https://github.com/imsun/gitment/issues/102 1234567891011_utils.http.post('https://gh-oauth.imsun.net', &#123; code: code, client_id: client_id, client_secret: client_secret &#125;, '').then(function (data) &#123; _this.accessToken = data.access_token; _this.update(); &#125;).catch(function (e) &#123; _this.state.user.isLoggingIn = false; alert(e); &#125;); 请求了一个服务接口，由于这个服务接口是作者自己搭建的，已经停止了。 这里可以直接改为请求 github 认证的接口 _utils.http.post(‘https://github.com/login/oauth/access_token&#39;, {…} 修改 themes\\yilia\\layout_partial\\post\\gitment.ejs 将以下 12&lt;link rel=\"stylesheet\" href=\"//imsun.github.io/gitment/style/default.css\"&gt;&lt;script src=\"//imsun.github.io/gitment/dist/gitment.browser.js\"&gt;&lt;/script&gt; 修改为： 12&lt;script src=\"https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.js\"&gt;&lt;/script&gt;&lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.css\"/&gt;","categories":[{"name":"技术笔记","slug":"技术笔记","permalink":"https://870727741.github.io/categories/技术笔记/"}],"tags":[{"name":"博客","slug":"博客","permalink":"https://870727741.github.io/tags/博客/"},{"name":"hexo","slug":"hexo","permalink":"https://870727741.github.io/tags/hexo/"}]}]}